Subject: 🚨 Disk Usage Alert - rbcapp1 Infrastructure

Disk Usage Alert Report
========================

Alert Details:
- Alert Threshold: {{ disk_usage_threshold }}%
- Total Hosts Checked: {{ total_hosts_checked }}
- Hosts with Alerts: {{ hosts_with_alerts }}
- Total Critical Filesystems: {{ total_critical_filesystems }}
- Generated: {{ ansible_date_time.iso8601 }}

Critical Hosts:
{% for host_data in alert_hosts %}

Host: {{ host_data.host }}
Critical Filesystems: {{ host_data.high_usage_count }}
{% for disk in host_data.high_usage_details %}
  📁 {{ disk.mount }} ({{ disk.device }})
     Usage: {{ disk.usage_percent }}% ({{ disk.size_used_gb }}/{{ disk.size_total_gb }} GB)
     Available: {{ disk.size_available_gb }} GB
     Filesystem: {{ disk.fstype }}
{% endfor %}
{% endfor %}

All Hosts Summary:
{% for host_data in all_hosts_summary %}
{{ host_data.host }}: {{ host_data.high_usage_count }}/{{ host_data.total_mounts }} filesystems critical
{% endfor %}

Recommended Actions:
1. Immediately investigate hosts with >90% usage
2. Clean up temporary files and logs
3. Archive or remove old data
4. Consider expanding storage capacity
5. Implement automated cleanup policies

This alert was generated by the rbcapp1 Infrastructure Management system.
For support, contact the system administration team.

---
rbcapp1 Infrastructure Management
Ansible Automation System